<!-- multilingual suffix: en, es -->

<!-- [en] -->

# SSH protocol. Asymmetric cryptography

<!-- [es] -->

# Protocolo SSH. Encriptación asimétrica

<!-- [en] -->

The information provided below is intended to be complementary to the project script and is not required reading.

## Motivation

Throughout the process of creating the virtual machine, you are asked to select access by SSH public key of the administrator account, which will be used during the project. Alternatively, a password could be generated for the administrator and thus access the virtual machine. Therefore, access to the virtual machine via SSH using a key pair does the same thing as a traditional password: it is an authentication mechanism.

In information transmissions that travel through public networks such as the Internet, it is essential that the information is protected with some type of encryption, normally generated through keys generated by algorithms that perform complex mathematical operations and with a certain degree of randomness, being hardly replicable.

## Protocol SSH

SSH (or Secure SHell) is a communications protocol that allows remote access to a server through a secure channel in which all information is encrypted, unlike other protocols such as FTP or Telnet.

You can find all the information regarding SSH in the following link:

<https://www.ssh.com/ssh/>

## Symmetric cryptography

Initially, cryptography protected transmitted information by encrypting the information with a key that was also used to decrypt the information. This system was called symmetric cryptography.

On the one hand, the existence of a single key implies that if an attacker intercepts the key when it is being shared between sender and receiver, he can already intercept all the information that both send using that key.

On the other hand, due to rapid technological advances, it takes “only” a few days for a modern mainstream computer to go through trial and error (known as a brute force attack) to find the unique key to decrypt a message. For equipment specifically designed for such use, it only takes a few hours.

## Asymmetric cryptography

Asymmetric cryptography presents significant improvements over symmetric cryptography. In the case at hand, the idea of key pairs is based on asymmetric cryptography.

A new key pair is generated from the RSA cryptosystem (which uses integer factorization). Due to the complexity of this process and the magnitude of the numbers chosen (on the order of 10300), it is assumed that it is impossible to generate the same pair of keys twice. That is, it is not possible to repeat a pair of keys that has already been previously generated.

When you want to send a message, the sender looks for the receiver's public key, encrypts your message with that key, and once the encrypted message reaches the receiver, he takes care of decrypting it using his private key.

A good analogy that illustrates how a key pair works is the following:

1. When the sender looks up the receiver's public key, we can imagine the recipient writing on the envelope of a letter.
1. When the sender encrypts his message with that key, he closes the envelope. Therefore, that key only serves to close the envelope, not to open it.
1. When the recipient receives your message, they use your private key. This private key, which has not been shared with anyone, is what allows the envelope to be opened.

In this way, even if an attacker intercepts a message, he cannot decrypt it since he does not know the private key that allows him to do so.

### Hash functions

*Hash* functions (such as SHA-256 or SHA-512) are cryptographic algorithms that transform (“digest”) an arbitrary set of data items into a single, fixed-length value, called a *hash*.

The security provided by a hash algorithm lies in its ability to produce a single value for a given set of data. In this way, a computed *hash* value can be used for integrity verification of copies of an original file. As an example, when downloading files on the Internet, the *hash* value obtained by applying the *hash* function to the original file is usually provided, so that the user can verify that the downloaded file has not been altered during the download.

On the other hand, the SSH security protocol uses *hash* functions that allow verifying if the public key provided is known; in other words, if the other interlocutor is known and safe.

<!-- [es] -->

La información que se aporta a continuación pretende ser complementaria al guion del proyecto y no es de lectura obligatoria.

## Motivación

A lo largo del proceso de la creación de la máquina virtual se pide que se seleccione el acceso por clave pública SSH de la cuenta de administrador, que será la utilizada durante el proyecto. Alternativamente se podría generar una contraseña para el administrador y acceder de esa forma a la máquina virtual. Por tanto, el acceso a la máquina virtual por SSH mediante un par de claves hace la misma función que una contraseña tradicional: ser un mecanismo de autenticación.

En las transmisiones de información que viajan a través de redes públicas como Internet es fundamental que la información esté protegida con algún tipo de encriptación, normalmente generada a través de unas claves generadas mediante algoritmos que realizan operaciones matemáticas complejas y con cierto grado de aleatoriedad, siendo difícilmente replicables.

## Protocolo SSH

SSH (o *Secure SHell*) es un protocolo de comunicaciones que permite el acceso remoto a un servidor por medio de un canal seguro en el que toda la información está cifrada, a diferencia de otros protocolos como FTP o Telnet.

Podéis encontrar toda la información referente a SSH en el siguiente enlace:

<https://www.ssh.com/ssh/>

## Criptografía simétrica

Inicialmente, la criptografía protegía la información transmitida encriptando la información con una clave que también se utilizaba para la desencriptación de la información. Este sistema recibía el nombre de criptografía simétrica.

Por un lado, la existencia de una única clave implica que si un atacante intercepta la clave cuando está siendo compartida entre emisor y receptor ya puede interceptar toda la información que ambos se envíen utilizando esa clave.

Por otro, debido al rápido avance tecnológico, para un ordenador moderno de uso común “solo” lleva unos días realizar el proceso de prueba y error (conocido como ataque por fuerza bruta) para encontrar la clave única para desencriptar un mensaje. Para un equipo diseñado específicamente para tal uso, solo supone unas horas.

## Criptografía asimétrica

La criptografía asimétrica presenta significativas mejoras respecto a la criptografía simétrica. En el caso que nos ocupa, la idea de los pares de claves se basa en la criptografía asimétrica.

Un par de claves nuevo se genera a partir del sistema criptográfico RSA (que utiliza la factorización de números enteros). Debido a la complejidad de este proceso y a la magnitud de los números elegidos (del orden de 10300), se asume que es imposible generar el mismo par de claves dos veces. Es decir, que no es posible que se repita un par de claves que ya ha sido anteriormente generado.

Cuando se quiere enviar un mensaje, el emisor busca la clave pública del receptor, cifra su mensaje con esa clave, y una vez que el mensaje cifrado llega al receptor, este se ocupa de descifrarlo usando su clave privada.

Una buena analogía que ilustra como funciona un par de claves es la siguiente:

1. Cuando el emisor busca la clave pública del receptor, podemos imaginar que escribe el destinatario en el sobre de una carta. 
1. Cuando el emisor cifra su mensaje con esa clave, cierra el sobre. Por tanto, esa clave solo sirve para cerrar el sobre, no para abrirlo.
1. Cuando el receptor recibe su mensaje, emplea su clave privada. Esta clave privada, que no ha sido compartido con nadie, es la que permite abrir el sobre.

De esta forma, aunque un atacante intercepte un mensaje no puede desencriptarlo ya que no conoce la clave privada que permite hacerlo.

### Funciones hash

Las funciones *hash* (como SHA-256 o SHA-512) son algoritmos criptográficos que transforman (“digieren”) un conjunto arbitrario de elementos de datos en único valor de longitud fija, que recibe el nombre de *hash*.

La seguridad proporcionada por un algoritmo *hash* recae en su capacidad de producir un único valor para un conjunto de datos dados. De esa forma, un valor *hash* calculado puede ser utilizado para la verificación de la integridad de copias de un fichero original. Como ejemplo, a la hora de descargar archivos en Internet se suele proporcionar el valor *hash* obtenido al aplicar la función *hash* al archivo original, para que el usuario pueda verificar que el archivo descargado no ha sido alterado durante la descarga.

Por otro lado, el protocolo de seguridad SSH emplea funciones hash que permiten verificar si la clave pública proporcionada es conocida; en otras palabras, si el otro interlocutor es conocido y seguro.